# ==========================================
# 1. WINDOW & FULLSCREEN – Seamless & instant feel
# ==========================================
fs                  = yes               # alias for fullscreen=yes (cleaner)
keepaspect          = yes               # maintain aspect on window resize
force-window        = immediate         # early window → smoother fs entry
x11-bypass-compositor = yes             # reduces compositor flicker/lag
ontop               = yes               # exclusive feel, less interference

# If tiny delay persists on Wayland → uncomment
# gpu-context       = wayland

#input-default-bindings=no

# ==========================================
# 2. PLAYBACK & RESUME – Consistent across files
# ==========================================
video-aspect-override = 16:9            # force 16:9 (your preference)
save-position-on-quit = yes
watch-later-directory = ~/.local/state/mpv/watch_later/  # XDG-compliant

keep-open           = always            # reliable resume in playlists
# write-filename-in-watch-later-config = yes  # uncomment only if network/removable resume flakes

# ==========================================
# 3. VIDEO – Safe & modern (Intel-tuned, gpu-next focus) – improved scaling & quality
# ==========================================
profile             = gpu-hq            # good base for scaling/deband/dither

vo                  = gpu-next          # modern libplacebo renderer
gpu-api             = auto              # auto prefers Vulkan if stable; safe fallback for Intel
hwdec               = auto              # auto picks vaapi on Intel (wrapper already detects)

# Explicit scalers – sharper upscaling, less blur (uncommented for better quality)
scale               = ewa_lanczossharp
cscale              = ewa_lanczossharp
dscale              = mitchell

# Antiring + sigmoid – reduces ringing, smoother scaling
scale-antiring      = 0.7
cscale-antiring     = 0.7
sigmoid-upscaling   = yes
correct-downscaling = yes
linear-downscaling  = no

# Light deband (your good values – kept as-is)
deband              = yes
deband-iterations    = 2
deband-threshold    = 3.0
deband-range        = 16
deband-grain        = 6

# Tone-mapping & color (safe defaults – kept as-is)
tone-mapping        = spline
tone-mapping-param  = 0.5
hdr-contrast-recovery = 0.3

target-colorspace-hint = no             # prevents washed-out colors in fullscreen (your working fix)

# Optional shaders – uncomment & download files to ~/.config/mpv/shaders/ when ready
# glsl-shader       = ~~/shaders/FSRCNNX/FSRCNNX_x2_16-0-4-1.glsl
# glsl-shader-append= ~~/shaders/SSim/SSimSuperRes.glsl
# glsl-shader-append= ~~/shaders/SSim/SSimDownscaler.glsl

# ==========================================
# 4. SUBTITLES – Top-tier consumer comfort (warm, premium cinematic) – kept exactly
# ==========================================
sub-font            = "Noto Sans, Roboto, Arial, sans-serif"
sub-font-size       = 54
sub-bold            = yes

sub-color           = '#F7E3AC'         # warmer creamy gold
sub-border-size     = 3.5
sub-border-color    = '#0A0A0A'
sub-shadow-offset   = 1.8
sub-shadow-color    = '#000000BB'

sub-back-color      = '#00000066'       # subtle box for readability

sub-pos             = 94
sub-margin-y        = 48
sub-align-x         = center
sub-align-y         = bottom

blend-subtitles     = yes               # modern correct name
sub-ass-override    = force             # consistent styling

# ==========================================
# 5. AUDIO – Added light normalization for movie comfort
# ==========================================
af                  = lavfi=[dynaudnorm=f=250:r=0.9:p=0.5]  # dynamic normalization – fixes quiet/loud scenes
volume-max          = 150               # allows louder if needed

# ==========================================
# 6. LANGUAGES + MISC (streaming tweaks + uosc compatibility + quiet messages)
# ==========================================
alang               = eng,en,en-US,ja
slang               = eng,en,en-US,ara

cache               = yes
demuxer-max-bytes   = 600MiB
demuxer-readahead-secs = 20         # better streaming smoothness

ytdl-format         = bestvideo[height<=?2160][fps<=?60]+bestaudio/best

osd-level           = 1                 # minimal OSD

# uosc compatibility (prevents overlap)
osc                 = no
osd-bar             = no
border              = no

# Quiet harmless messages (cleaner terminal) – FIXED
msg-level           = all=warn,hook=no