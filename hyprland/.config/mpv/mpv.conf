# ==========================================
# 1. WINDOW & FULLSCREEN – Your seamless & instant feel (enhanced)
# ==========================================
fs                  = yes
keepaspect          = yes
force-window        = immediate
x11-bypass-compositor = yes
ontop               = yes

# Wayland/Hyprland compatibility (uncomment if tiny delay ever appears)
# gpu-context       = wayland

#input-default-bindings=no   # already disabled in your uosc setup

# ==========================================
# 2. PLAYBACK & RESUME – Your consistent resume + extras from his
# ==========================================
video-aspect-override = 16:9
save-position-on-quit = yes
watch-later-directory = ~/.local/state/mpv/watch_later/
keep-open           = always
watch-later-options = start,sid   # also remembers selected subtitle track

# ==========================================
# 3. VIDEO – Intel-tuned gpu-next + best practices from both (2026)
# ==========================================
profile             = gpu-hq            # good safe base

vo                  = gpu-next
gpu-api             = auto              # safe; prefers Vulkan if stable on your Intel
hwdec               = auto              # usually picks vaapi on Intel iGPU

# Your sharp scalers (great choice!)
scale               = ewa_lanczossharp
cscale              = ewa_lanczossharp
dscale              = mitchell

scale-antiring      = 0.7
cscale-antiring     = 0.7
sigmoid-upscaling   = yes
correct-downscaling = yes
linear-downscaling  = no

# His excellent dithering (big quality win on gradients)
dither-depth        = 10
dither              = fruit
dither-size-fruit   = 6
temporal-dither     = yes
temporal-dither-period = 3

# Your light deband (perfect balance)
deband              = yes
deband-iterations    = 2
deband-threshold    = 3.0
deband-range        = 16
deband-grain        = 6

# Modern cinematic tone-mapping (his bt.2446a > your spline for most content)
tone-mapping        = bt.2446a
tone-mapping-desat  = 0.75          # subtle desaturation on very bright highlights

target-colorspace-hint = no         # your working fix for washed colors

# Optional: uncomment when you want to try shaders (FSRCNNX etc.)
# glsl-shader       = ~~/shaders/FSRCNNX/FSRCNNX_x2_16-0-4-1.glsl

# ==========================================
# 4. SUBTITLES – Your premium cinematic look (untouched!) + his better font
# ==========================================
sub-font            = "FiraCode Nerd Font, Noto Sans, Roboto, Arial, sans-serif"   # his nice font + your fallbacks
sub-font-size       = 54
sub-bold            = yes

sub-color           = '#F7E3AC'         # your warm creamy gold
sub-border-size     = 3.5
sub-border-color    = '#0A0A0A'
sub-shadow-offset   = 1.8
sub-shadow-color    = '#000000BB'

sub-back-color      = '#00000066'       # your subtle box

sub-pos             = 100
sub-margin-y        = 48
sub-align-x         = center
sub-align-y         = bottom

blend-subtitles     = yes
sub-ass-override    = force

# His useful subtitle paths
sub-file-paths      = subtitles:subs:Subtitles:Subs:ass:srt:sub

# ==========================================
# 5. AUDIO – Your comfort normalization + his pitch correction
# ==========================================
af                  = lavfi=[dynaudnorm=f=250:r=0.9:p=0.5]
volume-max          = 120
audio-pitch-correction = yes

# ==========================================
# 6. CACHE & STREAMING – Much stronger from his config
# ==========================================
cache               = auto
demuxer-max-bytes   = 600MiB
demuxer-max-back-bytes = 300MiB
demuxer-readahead-secs = 120        # his value – way better for streaming
cache-pause         = no

ytdl-format         = bestvideo[height<=?2160][fps<=?60]+bestaudio/best
ytdl-raw-options    = sub-lang="eng,en,ara,jp"   # his useful sub lang

# ==========================================
# 6. LANGUAGES + MISC (streaming tweaks + uosc compatibility + quiet messages)
# ==========================================
alang               = eng,en,en-US,ja
slang               = eng,en,en-US,ara

# ==========================================
# 7. UI & OSD – uosc compatibility + his clean look
# ==========================================
osc                 = no
osd-bar             = no
border              = no
cursor-autohide     = 100
osd-level           = 1
msg-level           = all=warn,hook=no   # your quiet terminal

# His nice OSD styling (optional – feels premium)
osd-font            = "FiraCode Nerd Font"
osd-font-size       = 36
osd-bold            = yes
#osd-duration        = 1000

# ==========================================
# 8. MISC – QoL from his config you’ll probably love
# ==========================================
hr-seek             = yes               # frame-accurate seeking
force-seekable      = yes
image-display-duration = inf            # images stay forever
video-output-levels = full              # PC levels (0-255)
screenshot-format   = png
screenshot-high-bit-depth = yes
screenshot-tag-colorspace = yes
screenshot-png-compression = 4
screenshot-dir      = "~/Pictures/mpv"